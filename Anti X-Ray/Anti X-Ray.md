# Anti X-Ray - 高版本可用的反矿透

## 插件简介

有效防止作弊者带走大量好的资源，同时也不会大量消耗系统资源！  
这个插件可以有效的防止玩家使用矿透进行作弊，如果您只是想找到作弊者并手动封禁，有一个选项可以记录玩家挖矿的数量和速度，并在超过您设定的阈值的时候提醒 OP 或者具有`antixray.monitorxrayers`权限的人。当然，这也并不意味这玩家一定是在作弊，但是您可以传送到玩家位置来观察该玩家行为以确认是否作弊！一般来说作弊者有一下行为：

1. 矿道垂直，因为他们无需担心岩浆的存在
2. 矿道黑暗无光源，因为他们能直接看到矿物并且无遗漏
3. 笔直或有极少分支的矿道，因为他们往往高效的到达矿物所在地
4. 没有庇护所就直接下矿，因为他们能看到怪物，与之周旋而非战斗
5. 随身携带很少的物资，采矿时不穿盔甲。甚至可能没有剑，同上
6. 进入服务器很短的时间即拥有钻石，因为他们往往高效的到达矿物所在地
7. 就常抱怨“为什么我要等待挖掘钻石”[^1]
8. 极高的矿石/普通石头比例，因为他们往往高效的到达矿物所在地

## 工作方式

玩家拥有一种不可见的数值，该数值会随着游戏的进行而增长（一直到最大数额）。不积极挖矿或收集资源（即闲逛）的玩家的数值不会获得任何增长。当玩家挖掘/采集有价值的矿物时，他们的数值就会减少。如果他们没有足够的数值来挖掘矿石，他们会收到一条消息，说明他们已经达到了极限，并且必须等待 X 分钟才能继续挖掘矿石。

在你安装此插件前就已经在服务器中的玩家数值将设为最大值，使其能顺利的过渡；在你安装此插件后进入服务器的玩家将以一个负数开始，这将阻止玩家登陆服务器立刻以矿透获取钻石等贵重物品，因为他们还没有足够的游戏时长，不具备开采钻石的条件。

同时，有些没有作弊的玩家也有可能会遇到此插件的误判。我的做法是调整默认限制，以最大程度地减少对合法玩家的影响，同时能有效的确保作弊者被发现，并且自己挖掘所有宝贵的矿石。如果玩家抱怨，以下是常见的几种情况：

1. 该玩家是作弊者，并试图说服您禁用该插件或授予他绕过该插件的权限，以便他可以更方便的获取资源。
2. 该玩家使用了别人现有的矿道，而不是自己挖掘，从而实现了他在首次加入服务器的第一个小时内就找到钻石。告诉他别再懒惰，努力挖掘属于自己的钻石。
3. 玩家非常幸运，并且不费吹灰之力的在矿洞探险中幸免于难，无需费心种植粮食或制造盔甲和武器。这是不太现实的-该玩家极有可能可能在作弊。
4. 这个玩家采取的是“鱼骨采矿法”，即在靠近基岩的地方挖掘长而直矿道，以收集大量钻石。该玩家可能对钻石有种特殊的迷恋[笑]，并且已经拥有了大量的钻石。对于这种情况，我建议您在达到极限时建议玩停止开采矿物。如果您向这样的玩家授予权限，他将挖掘该地区的大部分钻石资源，抢夺其他玩家开采矿石的机会（即使他没有作弊，也有可能造成问题）。

## 插件比较

- `AntiXRay` 和 `Orebfuscator`  
  这些插件以及类似插件的棘手之处在于，尽管它们非常有效，但运行起来却非常消耗资源。它们消耗大量的 CPU 周期来进行细致的玩家背包检查和处理，并且消耗大量的内存试图将结果缓存。小型服务器根本负担不起，大型服务器必须削减其最大玩家数量或其他插件。任何没有足够的 CPU 或内存的服务器都可能会遭受严重的延迟甚至崩溃，其他服务器也将花费太多的处理时间来阻止一些作弊者-这并不是一个很好的权衡。

  与此相反，Anti-XRay 非常简洁。它不需要做任何繁重的处理工作，并且只占用很少的内存。确实，从技术上讲，作弊者仍然可以使用 XRay 来查找矿石和地牢（Mojang 并没有真正将这些东西隐藏的很好），但是他们从中获得的资源极其有限。基本上，您是在允许玩家作弊（但是相当少！）的基础上来节省 CPU 和内存以阻止更明显的作弊。

- `ore loggers` 和 `ratio reporters`  
  那些根本不起作用！查看报告以确定谁使用了 XRay 只会帮助您在作弊者被实锤之后捕获他们，顺带删除了大量钻石资源，从而使非作弊的玩家无法获得钻石。禁止作弊者并不能真正解决问题，因为这不会使钻石重返地下，更多作弊者将很快取代这些人，因此问题仍然存在。此外，这种方法还要求管理员积极工作以捕获作弊者。相反，像此插件提供的自动化方法更有意义。

  Anti X-Ray 则不然，它将矿石继续保留在地下，以便非作弊玩家可以找到它们。通过限制玩家可以根据其在服务器上的游戏时间来挖掘其宝贵资源的数量，Anti X-Ray 可以确保作弊者不会获取超多的资源。他们仍然可以作弊，但无法破坏其他玩家的乐趣。（实际上，大多数服务器作弊者被限制后只是离开这个服务器，去寻找另一个可以不受限制作弊的服务器，这样很好地解决了您的作弊问题。）

- 与`ore loggers`相比，您实际上是在解决作弊问题，并以完全自动化的方式解决这个问题。与`ore obfuscation solutions`相比，您可以节省内存和 CPU。

## 安装方法

除了将 AntiXRay.jar 文件放入您的 plugins 文件夹之外，以下所有这些步骤都不是必选的。此插件甚至不需要数据库-当然这也是可选的。

## 进阶设置

- 自定义方块类型&数值  
  你可以按 ID 而不是名称指定部分矿石类型。如果你想保护一些由某个 mod 添加的自定义矿石块，这可能很有用，如果 AntiXRay 找到匹配的方块 ID，它将自动用方块名称替换配置中的方块 ID。但是请注意，有些 mod 对这个插件不太适合，因为它们引入了新的采集矿物方法（即非挖掘方式），完全绕过了插件。  
  同时也可以通过将值添加到由波浪号（~）分隔的块名/ID 中，来指定受保护方块的特殊类型。e.g. 不同类型的石材，不同颜色的羊毛等等，如果不设置属性值，它将默认为-1，这个值用于忽略属性值。下面是一些例子：

```
  ProtectedBlockValues:
  #受保护方块类型
  999~12:
  #只是一种实例方块
    Value: 50
    MaxHeight: 35
  WOOL~14:
  #红色羊毛
    Value: 100
```

- 自定义矿石比例阈值  
  如果您宁愿要求玩家开采更多的煤炭或挖掘更多的石头以代替有价值的矿石，而不是让他们等待一段时间，则需要做三件事。示例代码如下：
  1. 将每小时的积分设置为自动清零。
  2. 将您希望玩家破坏的其他矿物的“所需数值”设置为负数。然后，当玩家采集这类矿石时，他将获得积分，使他更接近于能采集贵重矿石的所需数值。
  3. 更改您的 messages.yml 文件以说明玩家必须打碎更多石头或其他矿石（取决于您的配置），而不是告诉他通过等待才可以获得更多数值。

```
在config.yml：
points per hour: 0
#每小时的点数
starting points: 0
#起始的数值
DIAMOND_ORE: 100
#挖掘钻石所需最小数值
STONE: -1
#挖掘石头所获得的数值


在messages.yml：
"You're finding a lot of diamond! You have to break more stone before you can collect this ore."
#“你找到了太多的钻石！你需要挖掘更多的石头来破坏这些矿物。”
```

- 数据库支持  
  根据作者的设计，没有数据库选项。这是因为使用数据库肯定比不使用有更大的麻烦，并且可能损害性能。每个玩家只存储两个整数值。每次登录仅从文件读取一次整数，并且每次退出服务器（或在关闭服务器时）一次将整数写入文件。不需要数据库，除此之外，他还会尝试减少在启动服务器时的加载时间。  
  作者曾经有过数据库支持，但是问题是这个数据库使用得很少，以至于连接会休眠。除非将来发生数值使用方式的更改，否则他将不会再添加数据库选项，关于上面的一些变化（指数据使用方式的更改），意味着会有更多数据，或者数据更改非常频繁。

## 配置文件&汉化[^2]

config.yml

## 显示信息&汉化[^2]

messages.yml

## 插件指令

`/antixray help` -> 显示可用的帮助  
`/antixray reload` -> 插件重载  
`/antixray check [player]` -> 向您显示玩家的数值  
`/antixray set <points|counter>` -> 设置玩家的数值

## 权限节点[默认 OP 全有]

`antixray.monitorxrayers` -> 当玩家达到其挖掘限制，该玩家将收到通知。  
`antixray.bypass` -> 允许玩家自由开采任何矿物，而无需经过 Anti X-Ray 的检查。  
`antixray.help` -> 允许玩家查看包含有关命令信息的帮助页面。  
`antixray.reload` -> 允许玩家重新加载插件配置和消息文件。  
`antixray.check.self` -> 允许玩家查看其剩余数值。  
`antixray.check.others` -> 允许玩家查看其他玩家的剩余数值。  
`antixray.set` -> 允许设置玩家存储的值，例如剩余挖掘点的数量。

## 下载

应原作者要求，本贴不提供下载渠道，请至原贴下载

## 注解

[^1]Why do I have to wait to mine diamonds?!  
[^2]此汉化文件基于 V1.9.0 For Minecraft 1.14.4

